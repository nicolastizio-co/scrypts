"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.createElement("style");e.textContent="\n    [data-ban-results] {\n      display: none;\n      position: absolute;\n      left: 0%;\n      top: 100%;\n      z-index: 999;\n      overflow: auto;\n      width: 100%;\n      padding: 0.5rem;\n      border-radius: 0.5rem;\n      background-color: white;\n      box-shadow: var(--ban-box-shadow, 0 2px 5px 0 rgba(0,0,0,0.2));\n    }\n    .ban-result-item {\n      padding: 0.5rem;\n      border-radius: 0.2rem;\n      transition: all 300ms ease;\n      cursor: pointer;\n      background-color: transparent;\n    }\n    .ban-result-item.active,\n    .ban-result-item:hover {\n      background-color: #eee;\n    }\n  ",document.head.appendChild(e);const t=(e,t)=>{e.forEach(((e,n)=>{e.classList.remove("active"),n===t&&e.classList.add("active")}))};document.querySelectorAll("[data-ban-results]").forEach((e=>{const t=e.getAttribute("data-ban-results");t&&e.style.setProperty("--ban-box-shadow",t)})),document.querySelectorAll("[data-ban-wrapper]").forEach((e=>{e.getAttribute("data-ban-wrapper");e.style.position="relative";const n=e.querySelector("[data-ban-input]"),a=e.querySelector("[data-ban-results]"),r=e.querySelector("[data-ban-city]"),o=e.querySelector("[data-ban-zipcode]");let s=-1;if(!n||!a)return;const l=((e,t)=>{let n;return(...a)=>{clearTimeout(n),n=setTimeout((()=>e(...a)),t)}})((async e=>{if(e.length>2){const t=await(async(e,t)=>{const n=`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(e)}&limit=5&type=housenumber&autocomplete=1`;try{const e=await fetch(n);return(await e.json()).features||[]}catch(e){return[]}})(e);((e,t,n,a)=>{if(n.innerHTML="",0===e.length)return void(n.style.display="none");const r=new RegExp(`(${t})`,"gi");e.forEach((({properties:e})=>{const t=document.createElement("div");t.className="ban-result-item";const o=e.label.replace(r,"<strong>$1</strong>");t.innerHTML=o,t.addEventListener("click",(()=>a(e))),n.appendChild(t)})),n.style.display="block"})(t,e,a,(e=>(({name:e,postcode:t,city:n},a,r,o,s,l)=>{let i="";a&&("split"===a.getAttribute("data-ban-input")?(a.value=e||"",i=a.value):(a.value=`${e||""}, ${t||""} ${n||""}`,i=a.value)),r&&(r.value=t||"",r.value),o&&(o.value=n||"",o.value),s.style.display="none"})(e,n,o,r,a)))}else a.style.display="none"}),300);n.addEventListener("input",(()=>{const e=n.value.trim();l(e)})),n.addEventListener("keydown",(e=>{const n=a.querySelectorAll(".ban-result-item");n.length&&("ArrowDown"===e.key?(e.preventDefault(),s=(s+1)%n.length,t(n,s)):"ArrowUp"===e.key?(e.preventDefault(),s=(s-1+n.length)%n.length,t(n,s)):"Enter"===e.key&&(e.preventDefault(),s>-1&&n[s]&&n[s].click()))})),document.addEventListener("click",(t=>{e.contains(t.target)||(a.style.display="none")}))}))}));